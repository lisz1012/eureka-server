Springboot项目在创建的时候就引入Eureka Server的以来，然后配置application.properties直接启动就可以了，默认管理页面在8080端口：
http://localhost:8080  

RestFUL：
青铜：http调用JSON  
白银：实体对象或资源的概念  
黄金：用不同的Http的方法  
王者：Spring Data Rest  
你在哪个级别？  

每30秒同步一次服务列表，每次得到的服务列表可能都有些机器不可用，Eureka大大降低了一致性，从而提高了可用性（买一包瓜子，不能保证都是好的）。
所以客户端对服务列表也要有容错机制，第一个调了一次没通，就调用第二个，重试加超时  

Eureka consumer服务信息的拉取分为全量式拉取和增量式拉取，eureka consumer启动时进行全量拉取，运行过程中由定时任务进行增量式拉取，
如果网络出现异常，可能导致先拉取的数据被旧数据覆盖（比如上一次拉取线程获取结果较慢，数据已更新情况下使用返回结果再次更新，导致数据版本落后），
产生脏数据。对此，eureka通过类型AtomicLong的fetchRegistryGeneration对数据版本进行跟踪，版本不一致则表示此次拉取到的数据已过期。
（https://zhuanlan.zhihu.com/p/88385121）

REST  
SpringData Rest可以接受一个表名或者数据源，然后就给出CRUD的各种Rest风格API的URL。修改URL的时候，老的别删掉，而是实现就有个版本标记v1，
新版本就调用v2的，多套代码同时存在。  
SpringCloud是基于http协议的；Soap是基于xml的；Dubbo是基于RPC的。http调用起来，要远比后两个麻烦，中间还有一个商量、修改API的地方。
那为什么要用http呢？1.可以应对异构系统，java平台可以调用php和.NET的服务 2.可插拔。Dubbo是socket长连接，服务端的具体某个被调用的机器
就不能下线；而http协议这次调用一个服务器，下次可以调用另一个，无状态，解决了网络的不可靠性。性能上来说，远低于Dubbo的RPC，后者直接穿对象，
而且序列化好了，自带压缩功能，双方在解析数据上成本也不一样，把数据序列化成byte数组性能更高。反序列化同理。SpringCloud就是牺牲了性能，提高
了整套系统的可用性，可用性无限提高，稍微降低了一些数据一致性。SpringCloud就像微信，没有状态说明对方是否在线；而Dubbo就像QQ，会看到对方
在线与否，不在线就不调用了。SpringCloud用的是JSON而Soap用的是xml，Soap
可以通过wsdl可以把服务端公布的API的xml拉过来，并且反转成接口，然后直接拿"接口.方法();"就可以了，这一点比较炫酷。这就涉及到了第三点 3.生态。
Spring是大哥，复制、LB、链路追踪、容灾、熔断、服务降级、监控等，什么都有。而且配置文件几乎没有，更多的是靠约定。  

Hystrix服务降级做的是：
```java
try{
    1. 发起服务器方的请求
        1。1 判断连接超时
            -> 这次请求记录到服务里
        http请求线程消耗。Consumeer没多少个用户同时连进来，就有多少个业务线程，线程隔离
        ConcurrentHashMap(URI,向服务端发起http请求的线程数)，根据URL把线程分类
        拿线程池统计线程数
        请求失败的时候做技术，当计数达到阈值的时候：
        count++;
        if（count == 100）{
            throw exception;
        }   
        请求/不请求/半请求
        开   关    半开，随机抽请求发出去，或者过几秒之后发一个，不成继续熔断，成了就重置count就可以了。出现熔断一般都是网络问题，
        所以一个Consumer超时之后一般不用通知其他的Consumer
        if(当前线程数满了) {
            throw Exception; // 转到catch中的降级页面，达到了线程隔离的效果，不因为一个/user的请求总是失败而影响到/order请求
                                总共就给/user这个URI分配若干个线程，用满了就报错
        }   
        1。2 常识向其他服务器发请求
    2。 还是没成功
} catch (Exceptione) {
    1。 避免返回不友好的错误信息，返回好看点的页面，重试按钮、邮箱、电话
    2。 return 另一个东西作为替代品：写到MQ里，也成功了，只是不那么成功(服务降级)
    return "请稍后再来";
}
```
